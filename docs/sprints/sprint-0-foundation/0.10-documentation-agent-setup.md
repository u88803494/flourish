# Sprint 0.10: Documentation & Agent Setup

**Status**: üìã Planning
**Duration**: ~1.5 hours
**Dependencies**: Sprint 0.9.4 (Cleanup) completed
**Objective**: Establish comprehensive AI agent documentation system for improved collaboration

---

## üéØ Goals

Build a complete documentation system following industry best practices (AGENTS.md standard) to enable efficient collaboration with AI coding assistants (Claude Code, Cursor, Windsurf, etc.).

**Reference Project**: `~/personal/my-website` - Uses AGENTS.md standard with Diataxis framework

---

## üìã Deliverables

### 1. AGENTS.md - Universal AI Assistant Configuration

**Purpose**: Unified configuration file for all AI coding assistants

**Sections**:

#### Project Overview

- Flourish introduction: integrated personal growth platform (financial tracking + statistics)
- Current architecture: Supabase-first (per ADR 001)
- Applications: Flow (Ë≤°ÂãôËøΩËπ§) + Apex (Áµ±Ë®àÂàÜÊûê)

#### Communication Guidelines

- **Language**: Always respond in Traditional Chinese (ÁπÅÈ´î‰∏≠Êñá)
- **Technical Terms**: Can remain in English with Chinese explanations
- **Code Comments**:
  - Personal projects (`/personal/`): Use English comments
  - Work projects (`/work/`): Use Traditional Chinese comments

#### Monorepo Structure

```
flourish/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ flow/          # Financial tracking (Next.js 15)
‚îÇ   ‚îú‚îÄ‚îÄ apex/          # Statistics & analytics (Next.js 15)
‚îÇ   ‚îî‚îÄ‚îÄ api/           # Backend API (archiving in Sprint 0.9)
‚îî‚îÄ‚îÄ packages/
    ‚îú‚îÄ‚îÄ database/      # Prisma schema (reference only)
    ‚îú‚îÄ‚îÄ supabase-client/  # Supabase JS client (Sprint 0.9.3)
    ‚îú‚îÄ‚îÄ ui/            # Shared components
    ‚îî‚îÄ‚îÄ [configs]/     # TypeScript, ESLint configs
```

#### Development Commands

```bash
# Root level (Turborepo)
pnpm dev                 # Start all apps
pnpm build              # Build all apps
pnpm lint               # Run ESLint
pnpm check-types        # TypeScript checks

# Database operations (Supabase CLI)
pnpm db:migration:new   # Create new migration
pnpm db:push            # Push to remote
pnpm db:diff            # Check schema diff
```

#### Tech Stack

- **Frontend**: Next.js 15 (App Router), TypeScript, Tailwind CSS, React 19
- **Database**: Supabase (PostgreSQL + Auth + REST API)
- **Deployment**: Vercel (frontend), Supabase (managed database)
- **Monorepo**: Turborepo, pnpm workspaces

#### File Naming Conventions

- **Components**: PascalCase (`TransactionCard.tsx`)
- **Pages**: `page.tsx` (Next.js App Router)
- **Hooks**: camelCase with `use` prefix (`useTransactions.ts`)
- **Utilities**: camelCase (`cn.ts`, `formatCurrency.ts`)
- **Types**: camelCase with `.types.ts` suffix (`transaction.types.ts`)
- **Migration files**: **CLI-generated** (never manually named)
  - ‚úÖ `npx supabase migration new feature_name`
  - ‚ùå Manual naming with timestamps

#### Database Conventions

- **Schema naming**: snake_case (`created_at`, `user_id`, `statement_status`)
- **Table names**: plural, snake_case (`users`, `transactions`, `recurring_expenses`)
- **ENUM types**: snake_case (`statement_status`, `transaction_type`)
- **Migration workflow**:
  1. Create: `npx supabase migration new name`
  2. Write SQL in generated file
  3. Push: `npx supabase db push`
  4. Verify: Check Supabase Dashboard or MCP tools
- **RLS policies**: Required on all tables with user data

#### Code Standards

- **TypeScript**: Strict mode enabled, no `any` types
- **Import order**:
  1. React imports
  2. Next.js imports
  3. Third-party packages
  4. Workspace packages (`@repo/`)
  5. Local absolute imports (`@/`)
- **Component pattern**:
  ```typescript
  const MyComponent: React.FC<Props> = (props) => {
    // 1. Hooks
    // 2. Early returns
    // 3. Event handlers (handleXxx)
    // 4. Main render
  };
  ```
- **Boolean naming**: `isLoading`, `hasData`, `canEdit`

#### Git Conventions

- **Commit messages**: Conventional Commits (English)
  - `feat(scope): add feature`
  - `fix(scope): fix bug`
  - `docs(scope): update docs`
  - `chore(scope): maintenance`

---

### 2. CLAUDE.md - Claude Code Specific Configuration

**Purpose**: Claude Code-specific features and workflows

**Content**:

````markdown
# Claude Code Configuration

@AGENTS.md

## üìö Documentation System

This project uses the **Diataxis framework** for AI-first documentation:

- **How do I...?** ‚Üí [Guides](./docs/guides/)
- **I want to learn...** ‚Üí [Tutorials](./docs/tutorials/)
- **What is...?** ‚Üí [Reference](./docs/reference/)
- **Why...?** ‚Üí [Explanation](./docs/explanation/)
- **What did we decide?** ‚Üí [ADR](./docs/adr/)

## Key Resources

- [Documentation Hub](./docs/README.md)
- [CLAUDE.md](./CLAUDE.md) - This file
- [Architecture Decision Records](./docs/decisions/)
- [Sprint Planning](./docs/sprints/sprint-0-foundation/)

## Claude Code Features

### Supabase MCP Integration

Configuration location: `~/.claude.json` (per-project)

```json
{
  "/Users/[username]/personal/flourish": {
    "mcpServers": {
      "supabase": {
        "type": "http",
        "url": "https://mcp.supabase.com/mcp?project_ref=fstcioczrehqtcbdzuij",
        "headers": {
          "Authorization": "Bearer sbp_[token]"
        }
      }
    }
  }
}
```
````

See: [MCP Setup Guide](./docs/guides/mcp-setup.md)

### Database Operations

Use MCP tools for database operations:

- `list_tables()` - List all tables
- `execute_sql(query)` - Run SQL queries
- `apply_migration(name, query)` - Apply migrations

### Sprint Management

Current context:

- **Phase 0**: Foundation (90% complete)
- **Sprint 0.9**: Supabase Migration
  - 0.9.1: ‚úÖ CLI Setup
  - 0.9.2: üîÑ Database Migrations
  - 0.9.3: Pending - Client Package
  - 0.9.4: Pending - Cleanup
- **Sprint 0.10**: üìã Documentation & Agent Setup (this sprint)

See: [Sprint Overview](./docs/sprints/sprint-0-foundation/overview.md)

````

---

### 3. ARCHITECTURE.md - Detailed Architecture Documentation

**Purpose**: System architecture reference

**Sections**:
- **System Overview**: Supabase-first architecture diagram
- **Application Structure**: Flow + Apex apps
- **Database Schema**: 7 tables with relationships
- **Authentication Flow**: Supabase Auth integration
- **Deployment Architecture**: Vercel + Supabase
- **Technology Decisions**: Link to ADRs

---

### 4. Symlinks for Other AI Tools

Create symlinks to enable compatibility with other AI coding assistants:

```bash
# In project root
ln -s AGENTS.md .cursorrules
ln -s AGENTS.md .windsurfrules
````

**Purpose**: Cursor and Windsurf IDE will automatically read these files

---

### 5. Update Existing Documentation

#### docs/README.md

Add references to new documentation structure:

- Link to AGENTS.md
- Link to CLAUDE.md
- Link to ARCHITECTURE.md

#### docs/sprints/sprint-0-foundation/overview.md

- Add Sprint 0.10 to sprint list
- Update Phase 0 completion percentage

---

## üîß Implementation Steps

### Step 1: Create AGENTS.md

1. Copy structure from `~/personal/my-website/AGENTS.md`
2. Adapt content for Flourish project
3. Include all sections listed above

### Step 2: Update CLAUDE.md

1. Keep current project overview content
2. Add `@AGENTS.md` reference at top
3. Add Diataxis documentation navigation
4. Add Supabase MCP configuration example
5. Add current sprint context

### Step 3: Create ARCHITECTURE.md

1. System architecture diagram (ASCII or reference to diagram file)
2. Database schema with relationships
3. Authentication flow explanation
4. Deployment architecture
5. References to ADR 001 and other decisions

### Step 4: Create Symlinks

```bash
ln -s AGENTS.md .cursorrules
ln -s AGENTS.md .windsurfrules
```

### Step 5: Update Existing Docs

1. Update `docs/README.md` with new references
2. Update `docs/sprints/sprint-0-foundation/overview.md`
3. Add Sprint 0.10 completion status

### Step 6: Commit and PR

```bash
git add AGENTS.md CLAUDE.md ARCHITECTURE.md .cursorrules .windsurfrules docs/
git commit -m "feat(sprint-0.10): establish AI agent documentation system

- Create AGENTS.md for universal AI assistant configuration
- Update CLAUDE.md with Diataxis framework and MCP setup
- Create ARCHITECTURE.md with system architecture details
- Add symlinks for Cursor and Windsurf compatibility
- Update documentation hub with new references
- Follow AGENTS.md standard from my-website project

Ref: Sprint 0.10 planning"
```

---

## ‚úÖ Verification Checklist

- [ ] `AGENTS.md` created with all required sections
- [ ] `CLAUDE.md` updated with Diataxis navigation and MCP config
- [ ] `ARCHITECTURE.md` created with system overview
- [ ] `.cursorrules` symlink created and working
- [ ] `.windsurfrules` symlink created and working
- [ ] `docs/README.md` updated with new references
- [ ] `docs/sprints/sprint-0-foundation/overview.md` includes Sprint 0.10
- [ ] All markdown files pass lint checks
- [ ] Documentation is readable and clear
- [ ] AI assistants can successfully read and understand the configuration

---

## üìä Success Criteria

1. **Completeness**: All required files created and properly structured
2. **Clarity**: Documentation is clear and easy to navigate
3. **Compatibility**: Works with multiple AI coding assistants (Claude Code, Cursor, Windsurf)
4. **Maintainability**: Easy to update as project evolves
5. **Alignment**: Follows industry best practices (AGENTS.md standard)

---

## üîó References

- **Reference Project**: `~/personal/my-website/AGENTS.md`
- **Standard**: [AGENTS.md](https://agents.md/)
- **Framework**: [Diataxis Documentation Framework](https://diataxis.fr/)
- **Related ADR**: [001-architecture-simplification.md](../../decisions/001-architecture-simplification.md)

---

## üìù Notes

- This sprint is intentionally placed after Sprint 0.9.4 to ensure all architectural decisions are finalized
- Documentation reflects the Supabase-first architecture (post-migration)
- Future updates should maintain consistency with the established structure
- Consider creating a documentation update checklist for future sprints

---

**Last Updated**: 2025-11-13
**Status**: Planning
**Next Sprint**: Phase 1.0 - Feature Development
