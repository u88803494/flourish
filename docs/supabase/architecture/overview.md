# Supabase-first æ¶æ§‹ç¸½è¦½

**ç‹€æ…‹**: ğŸ“ æ¡†æ¶ï¼ˆTask 3 å°‡å¡«å……è©³ç´°å…§å®¹ï¼‰

---

## ğŸ¯ æ¶æ§‹æ¦‚è¿°

Flourish æ¡ç”¨ **Supabase-first æ¶æ§‹**ï¼Œä½¿ç”¨ Supabase ä½œç‚ºä¸»è¦å¾Œç«¯ï¼Œå–ä»£å‚³çµ±çš„è‡ªè¨‚ API ä¼ºæœå™¨ã€‚

---

## ğŸ“ æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Frontend (Vercel)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Flow   â”‚            â”‚  Apex   â”‚        â”‚
â”‚  â”‚ (3100)  â”‚            â”‚ (3200)  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â”‚
â”‚       â”‚                      â”‚              â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Supabase JS Client
                   â”‚ (@repo/supabase-client)
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Supabase                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgreSQL Database                  â”‚  â”‚
â”‚  â”‚  + Row Level Security (RLS)          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Auto-generated REST API             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Supabase Auth                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Storage (PDF uploads)                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Edge Functions (optional)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”‘ æ ¸å¿ƒçµ„ä»¶ï¼ˆå¾…è©³ç´°èªªæ˜ï¼‰

### 1. PostgreSQL Database

- è³‡æ–™æ¨¡å‹
- é·ç§»ç­–ç•¥
- ç´¢å¼•è¨­è¨ˆ

### 2. Row Level Security (RLS)

- æ”¿ç­–è¨­è¨ˆåŸå‰‡
- ä½¿ç”¨è€…è³‡æ–™éš”é›¢
- æ•ˆèƒ½è€ƒé‡

### 3. Auto-generated REST API

- å¦‚ä½•ä½¿ç”¨
- æŸ¥è©¢èªæ³•
- é™åˆ¶èˆ‡æœ€ä½³å¯¦è¸

### 4. Supabase Auth

- èªè­‰æµç¨‹
- Session ç®¡ç†
- OAuth æ•´åˆ

### 5. Storage

- PDF ä¸Šå‚³
- æª”æ¡ˆæ¬Šé™
- å„²å­˜ç­–ç•¥

---

## ğŸ’¡ è¨­è¨ˆåŸå‰‡ï¼ˆå¾…æ“´å±•ï¼‰

1. **å®‰å…¨å„ªå…ˆ**: RLS å¼·åˆ¶åŸ·è¡Œ
2. **æˆæœ¬æ•ˆç›Š**: å…è²»å±¤ç´šè¶³å¤  Phase 0-1
3. **é–‹ç™¼æ•ˆç‡**: æ¸›å°‘ 60% é–‹ç™¼æ™‚é–“
4. **å¯æ“´å±•æ€§**: æœªä¾†å¯å‡ç´š Edge Functions

---

## ğŸ”— ç›¸é—œæ–‡æª”

- [æ¶æ§‹æ±ºç­–è¨˜éŒ„](./decisions.md)
- [èˆ‡ NestJS æ¯”è¼ƒ](./comparison.md)
- [ADR 001](../../decisions/001-architecture-simplification.md)

---

**æœ€å¾Œæ›´æ–°**: 2025-11-24
**Task 3 å°‡è£œå……**: è©³ç´°çµ„ä»¶èªªæ˜ã€è¨­è¨ˆåŸå‰‡ã€æœ€ä½³å¯¦è¸
